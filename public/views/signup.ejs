<html>
<head>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600' rel='stylesheet' type='text/css'>
	<link href="css/toolkit.css" rel="stylesheet">
	<link href="css/font-awesome.min.css" rel="stylesheet">
	<link href="css/application.css" rel="stylesheet">

	<style>
		/*custom font*/
		@import url(https://fonts.googleapis.com/css?family=Montserrat);
		
		/*basic reset*/
		/* * {margin: 0; padding: 0;} */
		
		body {
			height: 100%;
			/*Image only BG fallback*/
			
			/*background = gradient + image pattern combo*/
			background: 
			linear-gradient(rgba(196, 102, 0, 0.6), rgba(155, 89, 182, 0.6));
		}
		
		body {
			font-family: montserrat, arial, verdana;
		}
		/*form styles*/
		#msform {
			padding-top: 50px;
			width: 400px;
			margin: 50px auto;
			text-align: center;
			position: relative;
		}
		#msform fieldset {
			background: white;
			border: 0 none;
			border-radius: 3px;
			box-shadow: 0 0 15px 1px rgba(0, 0, 0, 0.4);
			padding: 20px 30px;
			box-sizing: border-box;
			width: 80%;
			margin: 0 10%;
			
			/*stacking fieldsets above each other*/
			position: relative;
		}
		/*Hide all except first fieldset*/
		#msform fieldset:not(:first-of-type) {
			display: none;
		}
		/*inputs*/
		#msform input, #msform textarea {
			padding: 15px;
			border: 1px solid #ccc;
			border-radius: 3px;
			margin-bottom: 10px;
			width: 100%;
			box-sizing: border-box;
			font-family: montserrat;
			color: #2C3E50;
			font-size: 13px;
		}
		/*buttons*/
		#msform .action-button {
			width: 100px;
			background: #27AE60;
			font-weight: bold;
			color: white;
			border: 0 none;
			border-radius: 1px;
			cursor: pointer;
			padding: 10px 5px;
			margin: 10px 5px;
		}
		#msform .action-button:hover, #msform .action-button:focus {
			box-shadow: 0 0 0 2px white, 0 0 0 3px #27AE60;
		}
		/*headings*/
		.fs-title {
			font-size: 15px;
			text-transform: uppercase;
			color: #2C3E50;
			margin-bottom: 10px;
		}
		.fs-subtitle {
			font-weight: normal;
			font-size: 13px;
			color: #666;
			margin-bottom: 20px;
		}
		/*progressbar*/
		#progressbar {
			margin-bottom: 30px;
			overflow: hidden;
			/*CSS counters to number the steps*/
			counter-reset: step;
		}
		#progressbar li {
			list-style-type: none;
			color: white;
			text-transform: uppercase;
			font-size: 9px;
			width: 33.33%;
			float: left;
			position: relative;
		}
		#progressbar li:before {
			content: counter(step);
			counter-increment: step;
			width: 20px;
			line-height: 20px;
			display: block;
			font-size: 10px;
			color: #333;
			background: white;
			border-radius: 3px;
			margin: 0 auto 5px auto;
		}
		/*progressbar connectors*/
		#progressbar li:after {
			content: '';
			width: 100%;
			height: 2px;
			background: white;
			position: absolute;
			left: -50%;
			top: 9px;
			z-index: -1; /*put it behind the numbers*/
		}
		#progressbar li:first-child:after {
			/*connector not needed before the first step*/
			content: none; 
		}
		/*marking active/completed steps green*/
		/*The number of the step and the connector before it = green*/
		#progressbar li.active:before,  #progressbar li.active:after{
			background: #27AE60;
			color: white;
		}
		
		
		
		
		
		
		
	</style>
	
	
</head>

<body style="background-image: url('images/bg/blue.png');">
	
	
	<nav class="navbar navbar-inverse navbar-fixed-top app-navbar">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-main">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="http://www.iosd.tech">
					<img src="images/dashboard/IOSD-logo.png" alt="brand">
				</a>
			</div>
			<div class="navbar-collapse collapse" id="navbar-collapse-main">
				
				<ul class="nav navbar-nav hidden-xs">
					<li >
						<a href="http://www.iosd.tech">Main Site</a>
					</li>
					<li class="active">
						<a href="#">Signup</a>
					</li>
					<li>
						<a href="/login">Login</a>
					</li>
				</ul>
				<ul class="nav navbar-nav navbar-right m-r-0 hidden-xs">
					<li>
						<button class="btn btn-default navbar-btn navbar-btn-avitar" data-toggle="popover">
							<!-- <img class="img-circle" src="assets/img/avatar-dhg.png"> -->
						</button>
					</li>
				</ul>
				
				<ul class="nav navbar-nav hidden-sm hidden-md hidden-lg">
					<li><a href="http://www.iosd.tech">Main Site</a></li>
					
					
					<li><a href="#">Sign Up</a></li>
					<li><a href="/login"></a>Login</li>
				</ul>
				
				<ul class="nav navbar-nav hidden">
					<li><a href="login.ejs">Logout</a></li>
				</ul>
			</div>
		</div>
	</nav>
	
	<form id="msform">
		<div class="control-group warning hide" id='errorMessage'>

		</div>
		<!-- progressbar -->
		<ul id="progressbar">
			<li class="active">Account Setup</li>
			<li>Tax Details</li>
			<li>Buisness Details</li>
		</ul>
		<!-- fieldsets -->
		<fieldset>
			<h2 class="fs-title">Create your account</h2>
			<h3 class="fs-subtitle">First Step!</h3>
			<input type="text" name="email" placeholder="Email" required/>
			<input type="password" name="password" placeholder="Password" required/>
			<input type="password" name="cpassword" placeholder="Confirm Password" required/>
			<input type="button" name="next" class="next action-button" value="Next" />
		</fieldset>
		<fieldset>
			<h2 class="fs-title">Account Details</h2>
			<h3 class="fs-subtitle">For Verification Purposes</h3>
			<label for="tin">TIN Number:</label>
    <input name="tin" type="text" class="required" />
    <label for="gst">GST ID:</label>
    <input name="gst" type="text" class="required" />
    <label for="bank">Bank Account Number:</label>
    <input name="bank" type="text" class="required" />
        
            <input type="button" name="previous" class="previous action-button" value="Previous" />
			<input type="button" name="next" class="next action-button" value="Next" />
		</fieldset>
		<fieldset>
			<h2 class="fs-title">Bank Details</h2>
			<h3 class="fs-subtitle">Just There...</h3>
			<label for="username">Name:</label>
    <input name="username" type="text">
    <label for="bio">Buisness Description:</label>
    <textarea name="bio" class="required"></textarea>
      <label for="address">Address:</label>
    <textarea name="address" class="required"></textarea>
		
            
            <input type="button" name="previous" class="previous action-button" value="Previous" />
			<button type='submit' class="submit" id='submit'>Submit</button>
		</fieldset>
	</form>
	
	<script src="js/jquery.min.js"></script>
	<script src='js/jquery-ui.min.js'></script>
	
	<script>     
		function encodeImageFileAsURL(element) {
			var file = element.files[0];
			// console.log(file);
			var reader = new FileReader();
			reader.onloadend = function() {
				// console.log('RESULT', reader.result)
			}
			reader.readAsDataURL(file);
		} ;

		function checkPassword(formData){
			if (formData.password != formData.cpassword){
				return false ;
			}
			return true ;
		} ;
		//jQuery time
		var current_fs, next_fs, previous_fs; //fieldsets
		var left, opacity, scale; //fieldset properties which we will animate
		var animating; //flag to prevent quick multi-click glitches
		
		$(".next").click(function(){

			// if (!$('#msform > fieldset')[0].checkValidity()) {
			// 	$('#submit')[0].click();
			// 	return ;
			// }	
			// if (! $('fieldset.active')[0].reportValidity()) {
			// 	console.log('Triggered');
			// 	return ;
			// }

			if(animating) return false;
			animating = true;
			
			current_fs = $(this).parent();
			next_fs = $(this).parent().next();
			
			//activate next step on progressbar using the index of next_fs
			$("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");
			
			//show the next fieldset
			next_fs.show(); 
			//hide the current fieldset with style
			current_fs.animate({opacity: 0}, {
				step: function(now, mx) {
					//as the opacity of current_fs reduces to 0 - stored in "now"
					//1. scale current_fs down to 80%
					scale = 1 - (1 - now) * 0.2;
					//2. bring next_fs from the right(50%)
					left = (now * 50)+"%";
					//3. increase opacity of next_fs to 1 as it moves in
					opacity = 1 - now;
					current_fs.css({
						'transform': 'scale('+scale+')',
						'position': 'absolute'
					});
					next_fs.css({'left': left, 'opacity': opacity});
				}, 
				duration: 800, 
				complete: function(){
					current_fs.hide();
					animating = false;
				}, 
				//this comes from the custom easing plugin
				easing: 'easeInOutBack'
			});
		});
		
		$(".previous").click(function(){
			if(animating) return false;
			animating = true;
			
			current_fs = $(this).parent();
			previous_fs = $(this).parent().prev();
			
			//de-activate current step on progressbar
			$("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");
			
			//show the previous fieldset
			previous_fs.show(); 
			//hide the current fieldset with style
			current_fs.animate({opacity: 0}, {
				step: function(now, mx) {
					//as the opacity of current_fs reduces to 0 - stored in "now"
					//1. scale previous_fs from 80% to 100%
					scale = 0.8 + (1 - now) * 0.2;
					//2. take current_fs to the right(50%) - from 0%
					left = ((1-now) * 50)+"%";
					//3. increase opacity of previous_fs to 1 as it moves in
					opacity = 1 - now;
					current_fs.css({'left': left});
					previous_fs.css({'transform': 'scale('+scale+')', 'opacity': opacity});
				}, 
				duration: 800, 
				complete: function(){
					current_fs.hide();
					animating = false;
				}, 
				//this comes from the custom easing plugin
				easing: 'easeInOutBack'
			});
		});
		
		$("#msform").submit(function(e){
			e.preventDefault();
			var formData = $("#msform").serializeArray().reduce(function(m,o){ m[o.name] = o.value; return m;}, {}) ;
			console.log(formData);

			if ( !checkPassword(formData) ) {
				alert('Passowords Dont Match');
				return ;
			}

			var element = $('#profilepic')[0];
			// console.log('Element');
			// console.log(element);
			var file = element.files[0];
			// console.log(file);
			var reader = new FileReader();
			reader.onloadend = function() {
				// console.log('RESULT', reader.result);
				formData.picture = reader.result ;
				// console.log(formData);
				$.post('signup' , formData , function(data) {
					// console.log(data);
					window.location.replace('/login');
				})
				return false;
			}
			reader.readAsDataURL(file);




		})
		
		
	</script>
	<script src="js/chart.js"></script>
	<script src="js/toolkit.js"></script>
	<script src="js/application.js"></script>
	
</body>
</html>